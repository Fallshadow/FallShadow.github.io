---
layout: post
title:  "1 OpenGL 简介"
date:   2024-03-20
categories: OpenGL
---

OpenGL 是一个规范，本质上是一个状态机。  

[1 资源](#OpenGL 学习资源)  
[2 简介](#简介)  
&emsp;[2.1 版本](#版本)  
&emsp;[2.2 特性](#特性)  
[3 本质](#本质)  
&emsp;[3.1 抽象](#抽象)  
# OpenGL 学习资源
[教程中文链接](https://learnopengl-cn.github.io/ "国外大佬的中文教程网站")  
[教程英文链接](https://learnopengl.com/ "国外大佬的英文教程网站")  
[Youtube Cherno 视频教程链接](https://www.youtube.com/watch?v=W3gAzLwfIP0&list=PLlrATfBNZ98foTJPJ_Ev03o2oq3-GGOS2&index=2&ab_channel=TheCherno )  
[B 站翻译 Cherno 视频教程链接](https://www.bilibili.com/video/BV1Ni4y1o7Au/?p=1)  
[gl 文档](https://docs.gl)  

## 简介

OpenGL，全称：Open Graphics Library，译名：开放图形库。

一般被认为是一个 API，里面包含了一系列可以操作图形、图像的函数。其实这是不正确的说法，OpenGL 其实是一个由 Khronos 组织制定并维护的规范。规定了每个函数的参数、表现、以及它们的输出值，至于内部具体每个函数是如何实现的，将由 OpenGL 库的开发者自行决定，一般来讲这个开发者就是各个显卡厂商。这通常意味着你购买的显卡所支持的 OpenGL 版本都是专门为这个系列显卡开发的。所以，任何与 OpenGL 规范不符的表现，都可以认为是开发者留下的 BUG。

OpenGL 的最基础的功能：那里有一堆数据，用它们画出一些东西，就仅此而已。

> 由于 OpenGL 的大多数实现都是由显卡厂商编写的，所以当 bug 出现时，一般可以通过升级显卡驱动来解决，这些驱动会包括你的显卡能支持的最新版本的 OpenGL，这也是为什么总是建议你偶尔更新一下显卡驱动

*Khronos Group 团队成立于 2000 年 1 月 由包括 3Dlabs, ATI, Discreet, Evans & Sutherland, Intel, Nvidia, SGI 和 Sun Microsystems 在内的多家国际知名多媒体行业领导者创立，致力于发展开放标准的应用程序接口 API ，以实现在多种平台和终端设备上的富媒体创作、加速和回放。*

OpenGL 3.3 规范文档 [链接](https://registry.khronos.org/OpenGL/specs/gl/glspec33.core.pdf)

### 版本

在 OpenGL3.2 之前，使用**立即渲染模式**（固定渲染模式），这种模式简单易上手，可以很容易地绘制图形，因为 OpenGL 的大多数功能都被库隐藏起来了，开发者不必了解编程细节就可以使用。  
但是这种模式有个明显的缺点是，不够灵活，开发者不能方便地制作出自己想要的效果。  
随着开发者追求灵活性的呼声越来越高，规范也变得更加灵活，最后 OpenGL 宣布从 3.2 开始废除立即渲染模式，并鼓励开发者使用核心模式下进行开发。  

**核心模式**（Core-prefile）要求开发者对图形编程有更深层次的理解，并且迫使开发者使用现代函数。当你试图在核心模式下调用废弃的函数时，OpenGL 会抛出错误并终止绘图。

更新的版本都是在 3.3 版本基础上增加了额外的功能，并没有改动核心框架。新版本只是引入了一些更加有效率或者更有用的方式去完成相同的功能。

> 当使用新版本的 OpenGL 特性时，只有新一代的显卡能够支持你的应用程序。这也是为什么大多数开发者基于较低版本的 OpenGL 编写程序，并只提供选项启用新版本的特性。

### 特性

OpenGL 的一大特性就是扩展支持，当一个显卡公司提出一个新特性或者渲染上的大优化，通常会以扩展的方式在驱动里实现。

通常，当一个扩展非常流行或者有用时，它终将成为 OpenGL 规范 的一部分

```C++
if (GL_ARB_extension_name)
{
    // 使用硬件支持的全新的现代特性
}
else
{
    // 不支持此扩展：用旧的方式去做
}
```

## 本质

OpenGL 本质上是一个状态机，依靠上下文设置信息，一般依靠设置选项，操作缓存更改 OpenGL 状态。
OpenGL 的函数一般分为两类，一种是状态设置的函数（State-changing） 一种是状态使用的函数（State-Using）

### 抽象

OpenGL 库是用 C 语言写的，同时也支持多种语言的派生，但其内核仍是一个 C 库。由于 C 的一些语言结构不易被翻译到其它的高级语言，因此 OpenGL 开发的时候引入了一些抽象层。“对象 (Object)”就是其中一个。在 OpenGL 中一个对象是指一些选项的集合，它代表 OpenGL 状态的一个子集。比如，我们可以用一个对象来代表绘图窗口的设置，之后我们就可以设置它的大小、支持的颜色位数等等。可以把对象看做一个 C 风格的结构体 (Struct)：
```C++
struct object_name {
    float  option1;
    int    option2;
    char[] name;
};
```
使用对象的一个好处是在程序中，我们不止可以定义一个对象，并设置它们的选项，每个对象都可以是不同的设置。在我们执行一个使用 OpenGL 状态的操作的时候，只需要绑定含有需要的设置的对象即可。拥有数个这样的对象允许我们指定多个模型，在想画其中任何一个的时候，直接将对应的对象绑定上去，便不需要再重复设置选项了。