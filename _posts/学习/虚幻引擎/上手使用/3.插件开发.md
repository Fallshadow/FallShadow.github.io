- [通用插件开发](#通用插件开发)
  - [在 UE 编辑器中新建空白插件](#在-ue-编辑器中新建空白插件)
  - [定位插件目录，创建 Source 模块结构](#定位插件目录创建-source-模块结构)
  - [创建 .Build.cs 文件（模块编译配置）](#创建-buildcs-文件模块编译配置)
- [自定义 FBX 导入器功能](#自定义-fbx-导入器功能)
  - [.Build.cs 文件](#buildcs-文件)


# 通用插件开发

## 在 UE 编辑器中新建空白插件

- Edit（编辑） → Plugins（插件） → 弹出插件管理器窗口
- ADD（新建插件） → 选择插件模板：Blank Plugin（空白插件）填写命名等信息

## 定位插件目录，创建 Source 模块结构

- 在文件管理器中找到插件目录
    > [你的项目根目录]/Plugins/PapiVasiLightImporter/
- UE 默认生成的插件目录只有基础文件（如 .uplugin），需手动创建 C++ 模块结构
- 在插件目录下新建文件夹，命名为 Source（必须大写 S，UE 识别模块的关键）
- 在 Source 文件夹下新建文件夹，命名（与插件名 / 模块名一致，大小写完全匹配）
- 最终目录：


Plugins/
└── PapiVasiLightImporter/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├── PapiVasiLightImporter.uplugin  # UE插件配置文件（自动生成）
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└── Source/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└── PapiVasiLightImporter/     # 模块核心目录

## 创建 .Build.cs 文件（模块编译配置）

在 Source/模块名/ 目录下，新建文本文件，按以下要求配置：

- 文件名（必须与模块名完全一致，大小写匹配）；
- 编码格式：UTF-8 无 BOM（避免编译时中文乱码或解析错误）；
- 配置代码

# 自定义 FBX 导入器功能

## .Build.cs 文件

```C++

using UnrealBuildTool;

public class PapiVasiLightImporter : ModuleRules
{
    public PapiVasiLightImporter(ReadOnlyTargetRules Target) : base(Target)
    {
        // PCH配置：使用显式或共享PCH，提升编译速度
        PCHUsage = PCHUsageMode.UseExplicitOrSharedPCHs;

        // 公共依赖模块（外部模块可访问，如项目核心模块、其他插件）
        PublicDependencyModuleNames.AddRange(new string[] {
            "Core",               // UE核心模块（基础类型、工具函数）
            "CoreUObject",        // 核心对象模块（UObject、蓝图、结构体）
            "Engine",             // 引擎模块（Actor、Component、StaticMesh）
            "UnrealEd",           // 编辑器模块（导入器、资源管理接口）包含 FBX SDK模块（读取FBX自定义属性、用户数据层）
            "AssetTools",         // 资源工具模块（创建/注册UE资源）
            "MeshDescription",    // 网格描述模块（生成可视化三角形网格）
            "AssetRegistry"       // 资源注册模块（将生成的Actor/网格注册到UE）
        });

        // 私有依赖模块（仅当前插件内部使用，外部不可见）
        PrivateDependencyModuleNames.AddRange(new string[] {
            "Slate",              // Slate UI模块（若导入器需添加UI交互）
            "SlateCore",          // Slate核心模块（UI基础组件）
            "EditorFramework"     // 编辑器框架模块（导入器工厂接口依赖）
        });

        // 启用C++17（FBX SDK部分功能需C++17支持，UE5.3+默认兼容）
        CppStandard = CppStandardVersion.Cpp17;

        // 可选：禁用特定编译器警告（如之前的C4172）
        if (Target.Platform == UnrealTargetPlatform.Win64)
        {
            PublicCompileOptions.Add("/wd4172"); // 仅Windows平台生效
        }

        // 可选：启用编辑器模块编译（确保插件在编辑器模式下正常运行）
        bBuildEditor = true;
        bEditorOnly = true; // 标记为仅编辑器插件，打包游戏时不包含
    }
}

```