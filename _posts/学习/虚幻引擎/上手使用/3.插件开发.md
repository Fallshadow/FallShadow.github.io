- [通用插件开发](#通用插件开发)
  - [创建 C++ 项目工程](#创建-c-项目工程)
  - [在 UE 编辑器中新建空白插件](#在-ue-编辑器中新建空白插件)
  - [根据需求修改 .uplugin 文件](#根据需求修改-uplugin-文件)
  - [添加自定义 C++ 文件](#添加自定义-c-文件)
- [导出插件](#导出插件)
  - [路径不要有中文](#路径不要有中文)
  - [成员变量初始化问题](#成员变量初始化问题)
  - [依赖模块显式引用问题](#依赖模块显式引用问题)
- [自定义 FBX 导入器功能](#自定义-fbx-导入器功能)
  - [.Build.cs 文件](#buildcs-文件)


# 通用插件开发

## 创建 C++ 项目工程

而不是蓝图，这样一来省去重新生成了，二来创建插件可以自动创建代码。

## 在 UE 编辑器中新建空白插件

- Edit（编辑） → Plugins（插件） → 弹出插件管理器窗口
- ADD（新建插件） → 选择插件模板：Blank Plugin（空白插件）填写命名等信息
- UE 会自动生成 Module 代码
- 最终目录：

Plugins/
└── 插件名称/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├── 插件名称.uplugin  &nbsp;&nbsp;&nbsp;&nbsp;# UE插件配置文件（自动生成）
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└── Source/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└── 插件名称/     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 模块核心目录
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├── private/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├── public/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└── 插件名称.Build.cs

## 根据需求修改 .uplugin 文件

```json
"Modules": [
	{
		"Name": "FBXImporterUtilPlugin",
		"Type": "Runtime",
		"LoadingPhase": "Default",
		"WhitelistPlatforms": [ // 仅在 Win64 平台生效
			"Win64"
		]
	}
```

## 添加自定义 C++ 文件

注意在 UE 创建之后有一个可以选择放在插件里的东西

# 导出插件

## 路径不要有中文

## 成员变量初始化问题

- 在 Game 模块中，不需要**基础类型/结构体类型成员**明确初始化默认值。引擎会自动赋予初始值
- 在 Engine / Plugin 模块，要求每个**基础类型/结构体类型成员**明确初始化默认值。否则可能会报错（比如在打包插件的时候发现没有初始化）

## 依赖模块显式引用问题

Unreal 在编辑器中编译时是“宽松模式”（上下文全可见），而打包/UAT 阶段是“严格模式”，只能访问 Build.cs 声明依赖的模块并且要求显式 include 头文件。

所以：编辑器能编，打包错，往往是模块依赖没加全或 include 缺失。

# 自定义 FBX 导入器功能

## .Build.cs 文件

```C++

using UnrealBuildTool;

public class FBXImportEditor : ModuleRules
{
    public FBXImportEditor(ReadOnlyTargetRules Target) : base(Target)
    {
        // PCH配置：使用显式或共享PCH，提升编译速度
        PCHUsage = PCHUsageMode.UseExplicitOrSharedPCHs;

        // 公共依赖模块（外部模块可访问，如项目核心模块、其他插件）
        PublicDependencyModuleNames.AddRange(new string[] {
            "Core",               // UE核心模块（基础类型、工具函数）
            "CoreUObject",        // 核心对象模块（UObject、蓝图、结构体）
            "Engine",             // 引擎模块（Actor、Component、StaticMesh）
            "UnrealEd",           // 编辑器模块（导入器、资源管理接口）包含 FBX SDK模块（读取FBX自定义属性、用户数据层）
            "AssetTools",         // 资源工具模块（创建/注册UE资源）
            "MeshDescription",    // 网格描述模块（生成可视化三角形网格）
            "AssetRegistry"       // 资源注册模块（将生成的Actor/网格注册到UE）
        });

        // 私有依赖模块（仅当前插件内部使用，外部不可见）
        PrivateDependencyModuleNames.AddRange(new string[] {
            "Slate",              // Slate UI模块（若导入器需添加UI交互）
            "SlateCore",          // Slate核心模块（UI基础组件）
            "EditorFramework"     // 编辑器框架模块（导入器工厂接口依赖）
        });

        // 启用C++17（FBX SDK部分功能需C++17支持，UE5.3+默认兼容）
        CppStandard = CppStandardVersion.Cpp17;

        // 可选：禁用特定编译器警告（如之前的C4172）
        if (Target.Platform == UnrealTargetPlatform.Win64)
        {
            PublicCompileOptions.Add("/wd4172"); // 仅Windows平台生效
        }

        // 可选：启用编辑器模块编译（确保插件在编辑器模式下正常运行）
        bBuildEditor = true;
        bEditorOnly = true; // 标记为仅编辑器插件，打包游戏时不包含
    }
}

```